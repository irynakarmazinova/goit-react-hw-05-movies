(this["webpackJsonpgoit-react-hw-05-movies"]=this["webpackJsonpgoit-react-hw-05-movies"]||[]).push([[0],{64:function(e,t,c){},65:function(e,t,c){},67:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c.n(n),r=c(29),s=c.n(r),i=c(8),j=c(2),u=c(1);function o(){return Object(u.jsxs)("nav",{className:"nav",children:[Object(u.jsx)(i.c,{exact:!0,to:"/",className:"link",activeClassName:"link--active",children:"Home"}),Object(u.jsx)(i.c,{to:"/movies",className:"link",activeClassName:"link--active",children:"Movies"})]})}var b=c(9),l=c(10),h=c.n(l),O=c(15),d=c(13),p=c.n(d),f="029b4bd853ef3dc8d52297bd7264794a";function x(){return(x=Object(O.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("/trending/movie/week?api_key=".concat(f));case 2:return t=e.sent,e.abrupt("return",t.data.results);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return v.apply(this,arguments)}function v(){return(v=Object(O.a)(h.a.mark((function e(t){var c,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("/search/movie?api_key="+f+"&query="+t);case 2:return c=e.sent,n=c.data.results,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return(g=Object(O.a)(h.a.mark((function e(t){var c,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p()("/movie/".concat(t,"?api_key=").concat(f));case 2:return c=e.sent,n=c.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return(y=Object(O.a)(h.a.mark((function e(t){var c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("/movie/".concat(t,"/credits?api_key=").concat(f));case 2:return c=e.sent,e.abrupt("return",c.data.cast);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){var t=e.moviesArr,c=Object(j.g)();return Object(u.jsx)("ul",{children:t.map((function(e){return Object(u.jsx)("li",{children:Object(u.jsx)(i.b,{to:{pathname:"/movies/".concat(e.id),state:{from:"/"===c.pathname.name?"/":"/movies"+c.search}},children:e.title})},e.id)}))})}function w(){var e=Object(n.useState)([]),t=Object(b.a)(e,2),c=t[0],a=t[1];return Object(n.useEffect)((function(){(function(){return x.apply(this,arguments)})().then(a)}),[]),Object(u.jsxs)("div",{className:"box",children:[Object(u.jsx)("h2",{className:"title",children:"Trending today"}),Object(u.jsx)("ul",{}),Object(u.jsx)(k,{moviesArr:c})]})}p.a.defaults.baseURL="https://api.themoviedb.org/3";var N=c(12);function S(){var e=Object(n.useState)(""),t=Object(b.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)([]),s=Object(b.a)(r,2),i=s[0],o=s[1],l=Object(j.f)(),h=Object(j.g)(),O=new URLSearchParams(h.search).get("query");Object(n.useEffect)((function(){O&&(m(O).then(o),a(O))}),[O]);return Object(u.jsxs)("div",{className:"box",children:[Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),m(c).then(o),l.push(Object(N.a)(Object(N.a)({},l.location),{},{search:"?query=".concat(c)}))},children:[Object(u.jsx)("input",{onChange:function(e){a(e.target.value)},type:"text",value:c,className:"input"}),Object(u.jsx)("button",{type:"submit",className:"btn",children:"Search"})]}),Object(u.jsx)(k,{moviesArr:i})]})}function C(e){var t=e.movieId,c=Object(n.useState)([]),a=Object(b.a)(c,2),r=a[0],s=a[1];Object(j.g)();return Object(n.useEffect)((function(){(function(e){return y.apply(this,arguments)})(t).then(s)}),[t]),Object(u.jsx)("ul",{children:r.map((function(e){return Object(u.jsx)("li",{children:Object(u.jsx)("p",{children:e.name})},e.id)}))})}function E(){var e=Object(n.useState)(null),t=Object(b.a)(e,2),c=t[0],a=t[1],r=Object(j.h)().movieId,s=Object(j.f)(),o=Object(j.g)(),l=Object(j.i)().url;Object(n.useEffect)((function(){(function(e){return g.apply(this,arguments)})(r).then(a)}),[r]);return c?Object(u.jsxs)("div",{children:[Object(u.jsx)("button",{onClick:function(){var e;(null===(e=o.state)||void 0===e?void 0:e.from)&&s.push(o.state.from)},children:"Go back"}),Object(u.jsx)("h2",{children:c.title}),Object(u.jsx)("img",{src:"https://image.tmdb.org/t/p/w500".concat(c.backdrop_path),alt:c.title}),Object(u.jsx)(i.c,{to:{pathname:l+"/cast",state:Object(N.a)(Object(N.a)({},o.state),{},{id:r})},children:"Cast"}),Object(u.jsxs)(j.c,{children:[Object(u.jsx)(j.a,{path:"".concat(l," / cast"),children:Object(u.jsx)(C,{movieId:r})}),Object(u.jsx)(j.a,{path:"".concat(l,"/ reviews")})]})]}):Object(u.jsx)("p",{children:"Not found"})}function I(){return Object(u.jsx)("h2",{className:"page",children:"Page not found"})}c(64);var _=function(){return Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)("h1",{className:"visually-hidden",children:"Movies"}),Object(u.jsx)(o,{}),Object(u.jsxs)(j.c,{children:[Object(u.jsx)(j.a,{exact:!0,path:"/",children:Object(u.jsx)(w,{})}),Object(u.jsx)(j.a,{path:"/movies/:movieId",children:Object(u.jsx)(S,{})}),Object(u.jsx)(j.a,{path:"/movies/",children:Object(u.jsx)(E,{})}),Object(u.jsx)(j.a,{children:Object(u.jsx)(I,{})})]})]})};c(65),c(66);s.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(i.a,{children:Object(u.jsx)(_,{})})}),document.getElementById("root"))}},[[67,1,2]]]);
//# sourceMappingURL=main.5b66effb.chunk.js.map